(this["webpackJsonpreact-redux-api-template"]=this["webpackJsonpreact-redux-api-template"]||[]).push([[0],[,function(e,t,a){e.exports={Container:"search_Container__2Il_U",InputContainer:"search_InputContainer__3uT_B"}},,,,,,,function(e,t,a){e.exports={DisplayItem:"displayItem_DisplayItem__1Un9M",Name:"displayItem_Name__1-0Pm",Info:"displayItem_Info__2t1ub"}},,,,,,,,function(e,t,a){e.exports={Button:"button_Button__1NOk3"}},function(e,t,a){e.exports={DisplayList:"displayList_DisplayList__3AkdP"}},function(e,t,a){e.exports={Container:"manage-display_Container__1797r"}},function(e,t,a){e.exports=a(32)},,,,,function(e,t,a){},function(e,t,a){},,,,,,,function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(6),l=a.n(c),o=(a(24),a(25),a(3)),s=a(2),u=a(1),i=a.n(u),m=a(16),p=a.n(m);var d=function(e){var t=e.onClickHandler,a=e.submit;return n.a.createElement("button",{type:a&&"submit",className:p.a.Button,onClick:t},"Search")},f={searchTerm:"",resultsPerPage:[5,10,15],pageNumber:1};var E=function(e){var t=e.totalRecords,a=e.clickHandler,c=Object(r.useRef)(""),l=Object(r.useRef)(0),s=Object(r.useRef)(0),u=Object(r.useState)([]),m=Object(o.a)(u,2),p=m[0],E=m[1];return Object(r.useEffect)((function(){for(var e=Math.ceil(t/l.current.value),a=[],r=1;r<=e;r++)a.push(r);E(a)}),[t,l.current.value]),n.a.createElement("form",{className:i.a.Container},n.a.createElement("div",{className:i.a.InputContainer},n.a.createElement("label",{htmlFor:"search-term"},"Search Term"),n.a.createElement("input",{name:"search-term",className:i.a.TextInput,ref:c,placeholder:"enter city name"})),n.a.createElement("div",{className:i.a.InputContainer},n.a.createElement("label",{htmlFor:"per-page"},"Per page"),n.a.createElement("select",{name:"per-page",ref:l,onChange:function(){return E([])}},f.resultsPerPage.map((function(e,t){return n.a.createElement("option",{key:t,value:e},e)})))),n.a.createElement("div",{className:i.a.InputContainer},n.a.createElement("label",{htmlFor:"go-to-page"},"Go to Page"),n.a.createElement("select",{name:"go-to-page",ref:s,disabled:0===p.length},p.map((function(e,t){return n.a.createElement("option",{key:t,value:e},e)})))),n.a.createElement("div",{className:i.a.InputContainer},n.a.createElement(d,{submit:!0,onClickHandler:function(e){e.preventDefault(),a({searchTerm:c.current.value,pageNumber:s.current.value,resultsPerPage:l.current.value})}},"Search")))},h=a(8),v=a.n(h);var g=function(e){var t=e.name,a=e.address,r=e.city,c=e.image_url;return n.a.createElement("div",{className:v.a.DisplayItem},n.a.createElement("img",{src:c,alt:t}),n.a.createElement("div",{className:v.a.Info},n.a.createElement("label",{className:v.a.Name},t),n.a.createElement("label",null,a),n.a.createElement("label",null,r)))},_=a(17),b=a.n(_);var P=function(e){var t=Object(s.c)((function(e){return e.apiData})).records,a=null;return t&&(a=t.length?t.map((function(e){return n.a.createElement(g,Object.assign({key:e.id},e))})):"No records found!"),n.a.createElement("div",{className:b.a.DisplayList},a)};var y=a(18),O=a.n(y),I="https://opentable.herokuapp.com/api/restaurants?city=".concat("SEARCH_TERM","&per_page=").concat("RESULTS_PER_PAGE","&page=").concat("PAGE_NUMBER");var N=function(e){var t=Object(r.useState)({searchTerm:f.searchTerm,pageNumber:f.pageNumber[0],resultsPerPage:f.resultsPerPage[0]}),a=Object(o.a)(t,2),c=a[0],l=a[1],u=Object(r.useState)(!1),i=Object(o.a)(u,2),m=i[0],p=i[1],d=Object(r.useState)({totalRecords:0,perPage:f.resultsPerPage[0],currentPage:1}),h=Object(o.a)(d,2),v=h[0],g=h[1],_=Object(s.b)();return Object(r.useEffect)((function(){var e=function(e){return _(function(e){return{type:"SET_API_DATA",payload:e}}(e))};if(c.searchTerm){var t=I.replace("SEARCH_TERM",c.searchTerm).replace("PAGE_NUMBER",c.pageNumber).replace("RESULTS_PER_PAGE",c.resultsPerPage);fetch(t).then((function(e){return e.json()})).then((function(t){if(t.error)throw Error(t.error);var a=t.total_entries,r=t.per_page,n=t.current_page,c=t.restaurants;e(c.map((function(e){return{id:e.id,name:e.name,address:e.address,city:e.city,image_url:e.image_url}}))),g({totalRecords:a,perPage:r,currentPage:n}),p(!1)})).catch((function(t){e([]),p(!1),g({totalRecords:0,perPage:f.resultsPerPage[0],currentPage:1}),console.error(t)}))}}),[c,_]),n.a.createElement("div",{className:O.a.Container},n.a.createElement(E,{clickHandler:function(e){p(!0),l(e)},totalRecords:v.totalRecords}),m?n.a.createElement("p",null,"Please wait while we fetch your search results..."):n.a.createElement(P,null))};var R=function(){return n.a.createElement("div",{className:"App"},n.a.createElement("h2",null,"Search API Template with Redux"),n.a.createElement("p",null,"Enter name of a city and click Search to view a list of restaurants."),n.a.createElement(N,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var j=a(5),T=a(13),S={records:null};var A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_API_DATA":return Object(T.a)(Object(T.a)({},e),{},{records:t.payload});default:return e}},C=a(12),k=function(e,t){return e.find((function(e){return e.id===t.id}))?Object(C.a)(e):[].concat(Object(C.a)(e),[t])},w={favoriteItems:[]};var D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TO_FAVORITES":return k(e.favoriteItems,t.payload);case"REMOVE_FROM_FAVORITES":return e.filter((function(e){return e.id!==t.payload}));default:return e}},x=Object(j.b)({apiData:A,favorites:D}),B=Object(j.c)(x);l.a.render(n.a.createElement(s.a,{store:B},n.a.createElement(R,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[19,1,2]]]);
//# sourceMappingURL=main.4269295f.chunk.js.map