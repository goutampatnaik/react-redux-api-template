(this["webpackJsonpreact-redux-api-template"]=this["webpackJsonpreact-redux-api-template"]||[]).push([[0],[,,,function(e,t,a){e.exports={Container:"favoriteItems_Container__1b04g",Hide:"favoriteItems_Hide__20Jq1",Favorites:"favoriteItems_Favorites__3m94u",TextContent:"favoriteItems_TextContent__32_I6",Name:"favoriteItems_Name__2TAaV",Address:"favoriteItems_Address__3X4s5",City:"favoriteItems_City__3bViK",RemoveButton:"favoriteItems_RemoveButton__2b4RM"}},,function(e,t,a){e.exports={DisplayItem:"displayItem_DisplayItem__1Un9M",Img:"displayItem_Img__1nJXk",Info:"displayItem_Info__2t1ub",Button:"displayItem_Button__3JbRB",Name:"displayItem_Name__1-0Pm",Address:"displayItem_Address__14gJ7",City:"displayItem_City__1TkLp"}},function(e,t,a){e.exports={Container:"search_Container__2Il_U",InputContainer:"search_InputContainer__3uT_B",Title:"search_Title__37L-l"}},,,function(e,t,a){e.exports={Container:"header_Container__FUWWm",Header:"header_Header__2lI_C",HeaderText:"header_HeaderText__2MVE8",ButtonContainer:"header_ButtonContainer__3W07V"}},,,,,,,function(e,t,a){e.exports={Button:"button_Button__1NOk3",Alt:"button_Alt__3hVnq"}},function(e,t,a){e.exports={Container:"displayList_Container__3t37t",DisplayList:"displayList_DisplayList__3AkdP"}},,,,function(e,t,a){e.exports={Container:"manageSearch_Container__1px2f"}},function(e,t,a){e.exports=a(35)},,,,,function(e,t,a){},function(e,t,a){},,,,,,,function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),i=a.n(c),o=(a(27),a(28),a(4)),l=a(1),s=a(6),u=a.n(s),m=a(12),d=a(16),_=a.n(d);var f=function(e){var t=e.onClickHandler,a=e.submit,n=e.alt,c=e.disabled,i=Object(m.a)(e,["onClickHandler","submit","alt","disabled"]);return r.a.createElement("button",{type:a&&"submit",className:"".concat(_.a.Button," ").concat(n&&_.a.Alt),onClick:t,disabled:c},i.children)},p={searchTerm:"",resultsPerPage:[5,10,15],pageNumber:1};var v=function(e){var t=e.title,a=e.totalRecords,c=e.clickHandler,i=e.searchTermHint,l=Object(n.useRef)(""),s=Object(n.useRef)(0),m=Object(n.useRef)(0),d=Object(n.useState)([]),_=Object(o.a)(d,2),v=_[0],E=_[1];return Object(n.useEffect)((function(){for(var e=Math.ceil(a/s.current.value),t=[],n=1;n<=e;n++)t.push(n);E(t)}),[a,s.current.value]),r.a.createElement("form",{className:u.a.Container},r.a.createElement("p",{className:u.a.Title},t),r.a.createElement("div",{className:u.a.InputContainer},r.a.createElement("input",{name:"search-term",className:u.a.TextInput,ref:l,placeholder:i}),r.a.createElement("select",{name:"per-page",ref:s,onChange:function(){return E([])}},p.resultsPerPage.map((function(e,t){return r.a.createElement("option",{key:t,value:e},"Per page ".concat(e))}))),r.a.createElement("select",{name:"go-to-page",ref:m,disabled:0===v.length},v.map((function(e,t){return r.a.createElement("option",{key:t,value:e},"Page ".concat(e))})))),r.a.createElement("div",{className:u.a.InputContainer},r.a.createElement(f,{submit:!0,onClickHandler:function(e){e.preventDefault(),c({searchTerm:l.current.value,pageNumber:m.current.value,resultsPerPage:s.current.value})}},"Search")))},E=a(2),b=a(5),h=a.n(b);var g=function(e){var t=e.onClickHandler,a=Object(m.a)(e,["onClickHandler"]),n=a.name,c=a.address,i=a.city,o=a.image_url,l=a.isFavorite;return r.a.createElement("div",{className:h.a.DisplayItem},r.a.createElement("img",{className:h.a.Img,src:o,alt:n}),r.a.createElement("button",{className:h.a.Button,onClick:function(){return t(Object(E.a)({},a))}},l?"Remove":"Add"),r.a.createElement("div",{className:h.a.Info},r.a.createElement("label",{className:h.a.Name},n),r.a.createElement("label",{className:h.a.Address},c),r.a.createElement("label",{className:h.a.City},i)))};function I(e){return{type:"REMOVE_FROM_FAVORITES",payload:e}}var O=a(17),y=a.n(O);var C=function(e){var t=Object(l.c)((function(e){return e.apiData})).records,a=Object(l.c)((function(e){return e.favoritesData})).favoriteItems,n=Object(l.b)(),c=function(e){var t;e.isFavorite?(t=e.id,n(I(t))):function(e){n(function(e){return{type:"ADD_TO_FAVORITES",payload:e}}(e))}(e)},i=null;return t&&(i=t.length?t.map((function(e){return r.a.createElement(g,Object.assign({key:e.id},e,{onClickHandler:c,isFavorite:void 0!==a.find((function(t){return t.id===e.id}))}))})):"No records found!"),r.a.createElement("div",{className:y.a.Container},r.a.createElement("div",{className:y.a.DisplayList},i))},N=a(21),j=a.n(N),P="https://opentable.herokuapp.com/api/restaurants?city=".concat("SEARCH_TERM","&per_page=").concat("RESULTS_PER_PAGE","&page=").concat("PAGE_NUMBER");var T=function(e){var t=Object(n.useState)({searchTerm:p.searchTerm,pageNumber:p.pageNumber[0],resultsPerPage:p.resultsPerPage[0]}),a=Object(o.a)(t,2),c=a[0],i=a[1],s=Object(n.useState)(!1),u=Object(o.a)(s,2),m=u[0],d=u[1],_=Object(n.useState)({totalRecords:0,perPage:p.resultsPerPage[0],currentPage:1}),f=Object(o.a)(_,2),E=f[0],b=f[1],h=Object(l.b)(),g=Object(n.useCallback)((function(e,t,a){h(function(e){return{type:"SET_API_DATA",payload:e}}(e)),d(t),b(a)}),[h]);return Object(n.useEffect)((function(){if(c.searchTerm){var e=P.replace("SEARCH_TERM",c.searchTerm).replace("PAGE_NUMBER",c.pageNumber).replace("RESULTS_PER_PAGE",c.resultsPerPage);fetch(e).then((function(e){return e.json()})).then((function(e){if(e.error)throw Error(e.error);g(e.restaurants.map((function(e){return{id:e.id,name:e.name,address:e.address,city:e.city,image_url:e.image_url}})),!1,{totalRecords:e.total_entries,perPage:e.per_page,currentPage:e.current_page})})).catch((function(e){g([],!1,{totalRecords:0,perPage:p.resultsPerPage[0],currentPage:1}),console.error(e)}))}}),[c,g]),r.a.createElement("div",{className:j.a.Container},r.a.createElement(v,{title:"Enter name of a city and click Search to view a list of restaurants.",searchTermHint:"enter name of city",clickHandler:function(e){d(!0),i(e)},totalRecords:E.totalRecords}),m?r.a.createElement("p",null,"Please wait while we fetch your search results..."):r.a.createElement(C,null))},R=a(9),A=a.n(R),k=a(3),H=a.n(k);var S=function(e){var t=e.favoriteItems,a=e.show,n=Object(l.b)();return r.a.createElement("div",{className:"".concat(H.a.Container," ").concat(a||H.a.Hide)},r.a.createElement("ul",null,t.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement("div",{className:H.a.Favorites},r.a.createElement("div",{className:H.a.TextContent},r.a.createElement("label",{className:H.a.Name},e.name),r.a.createElement("label",{className:H.a.Address},e.address),r.a.createElement("label",{className:H.a.City},e.city)),r.a.createElement("div",{className:H.a.RemoveButton,onClick:function(){return t=e.id,n(I(t));var t}},"\u2715")))}))))},x=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],c=t[1],i=Object(l.c)((function(e){return e.favoritesData})).favoriteItems,s=i.length;return Object(n.useEffect)((function(){c((function(e){return e&&s}))}),[s]),r.a.createElement("div",{className:A.a.Container},r.a.createElement("div",{className:A.a.Header},r.a.createElement("div",{className:A.a.HeaderText},r.a.createElement("h3",null,"Search API Template with Redux")),r.a.createElement("div",{className:A.a.ButtonContainer},r.a.createElement(f,{alt:!0,disabled:!s,onClickHandler:function(){c((function(e){return!e}))}},r.a.createElement("span",null,s)))),r.a.createElement(S,{show:a,favoriteItems:i}))};var w=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(x,null),r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"filler"}),r.a.createElement(T,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var B=a(8),D={records:null};var F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_API_DATA":return Object(E.a)(Object(E.a)({},e),{},{records:t.payload});default:return e}},M=a(18),V=function(e,t){return e.find((function(e){return e.id===t.id}))?e:[].concat(Object(M.a)(e),[t])},L={favoriteItems:[]};var U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TO_FAVORITES":return Object(E.a)(Object(E.a)({},e),{},{favoriteItems:V(Object(M.a)(e.favoriteItems),t.payload)});case"REMOVE_FROM_FAVORITES":return Object(E.a)(Object(E.a)({},e),{},{favoriteItems:e.favoriteItems.filter((function(e){return e.id!==t.payload}))});default:return e}},J=Object(B.b)({apiData:F,favoritesData:U}),W=Object(B.c)(J);i.a.render(r.a.createElement(l.a,{store:W},r.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[22,1,2]]]);
//# sourceMappingURL=main.6d3a262f.chunk.js.map